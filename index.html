<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>调查问卷</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>调查问卷</h1>
    <h4>性格测试 - 选项说明： 1 强烈反对 2 比较反对 3 反对 4 适中 5 同意 6 比较同意 7 非常同意</h4>
    <form id="surveyForm">
        <!-- 问题1 -->
        <p>问题1：我担心爱人不会像我关心他一样关心我：</p>
        <label><input type="radio" name="question1" value="1">1</label>
        <label><input type="radio" name="question1" value="2">2</label>
        <label><input type="radio" name="question1" value="3">3</label>
        <label><input type="radio" name="question1" value="4">4</label>
        <label><input type="radio" name="question1" value="5">5</label>
        <label><input type="radio" name="question1" value="6">6</label>
        <label><input type="radio" name="question1" value="7">7</label>

        <!-- 问题2 -->
        <p>问题2：我想接近他人的愿望有时会把人吓跑：</p>
        <label><input type="radio" name="question2" value="1">1</label>
        <label><input type="radio" name="question2" value="2">2</label>
        <label><input type="radio" name="question2" value="3">3</label>
        <label><input type="radio" name="question2" value="4">4</label>
        <label><input type="radio" name="question2" value="5">5</label>
        <label><input type="radio" name="question2" value="6">6</label>
        <label><input type="radio" name="question2" value="7">7</label>

        <!-- 问题3 -->
        <p>问题3：我需要很多保证才相信伴侣是爱我的：</p>
        <label><input type="radio" name="question3" value="1">1</label>
        <label><input type="radio" name="question3" value="2">2</label>
        <label><input type="radio" name="question3" value="3">3</label>
        <label><input type="radio" name="question3" value="4">4</label>
        <label><input type="radio" name="question3" value="5">5</label>
        <label><input type="radio" name="question3" value="6">6</label>
        <label><input type="radio" name="question3" value="7">7</label>

        <!-- 问题4 -->
        <p>问题4：我发现伴侣不像我期望的那般亲密交往：</p>
        <label><input type="radio" name="question4" value="1">1</label>
        <label><input type="radio" name="question4" value="2">2</label>
        <label><input type="radio" name="question4" value="3">3</label>
        <label><input type="radio" name="question4" value="4">4</label>
        <label><input type="radio" name="question4" value="5">5</label>
        <label><input type="radio" name="question4" value="6">6</label>
        <label><input type="radio" name="question4" value="7">7</label>

        <!-- 问题5 -->
        <p>问题5：当我需要帮助时爱人却没有出现在身边，这会让我感到沮丧：</p>
        <label><input type="radio" name="question5" value="1">1</label>
        <label><input type="radio" name="question5" value="2">2</label>
        <label><input type="radio" name="question5" value="3">3</label>
        <label><input type="radio" name="question5" value="4">4</label>
        <label><input type="radio" name="question5" value="5">5</label>
        <label><input type="radio" name="question5" value="6">6</label>
        <label><input type="radio" name="question5" value="7">7</label>

        <!-- 问题6 -->
        <p>问题6：我不会常常担心被人抛弃：</p>
        <label><input type="radio" name="question6" value="1">1</label>
        <label><input type="radio" name="question6" value="2">2</label>
        <label><input type="radio" name="question6" value="3">3</label>
        <label><input type="radio" name="question6" value="4">4</label>
        <label><input type="radio" name="question6" value="5">5</label>
        <label><input type="radio" name="question6" value="6">6</label>
        <label><input type="radio" name="question6" value="7">7</label>

        <!-- 问题7 -->
        <p>问题7：我想接近伴侣，但是总想后退：</p>
        <label><input type="radio" name="question7" value="1">1</label>
        <label><input type="radio" name="question7" value="2">2</label>
        <label><input type="radio" name="question7" value="3">3</label>
        <label><input type="radio" name="question7" value="4">4</label>
        <label><input type="radio" name="question7" value="5">5</label>
        <label><input type="radio" name="question7" value="6">6</label>
        <label><input type="radio" name="question7" value="7">7</label>

        <!-- 问题8 -->
        <p>问题8：如果伴侣和我太接近，我感到紧张：</p>
        <label><input type="radio" name="question8" value="1">1</label>
        <label><input type="radio" name="question8" value="2">2</label>
        <label><input type="radio" name="question8" value="3">3</label>
        <label><input type="radio" name="question8" value="4">4</label>
        <label><input type="radio" name="question8" value="5">5</label>
        <label><input type="radio" name="question8" value="6">6</label>
        <label><input type="radio" name="question8" value="7">7</label>

        <!-- 问题9 -->
        <p>问题9：我试图避免和伴侣太过接近：</p>
        <label><input type="radio" name="question9" value="1">1</label>
        <label><input type="radio" name="question9" value="2">2</label>
        <label><input type="radio" name="question9" value="3">3</label>
        <label><input type="radio" name="question9" value="4">4</label>
        <label><input type="radio" name="question9" value="5">5</label>
        <label><input type="radio" name="question9" value="6">6</label>
        <label><input type="radio" name="question9" value="7">7</label>

        <!-- 问题10 -->
        <p>问题10：我经常和伴侣讨论我的问题和顾虑：</p>
        <label><input type="radio" name="question10" value="1">1</label>
        <label><input type="radio" name="question10" value="2">2</label>
        <label><input type="radio" name="question10" value="3">3</label>
        <label><input type="radio" name="question10" value="4">4</label>
        <label><input type="radio" name="question10" value="5">5</label>
        <label><input type="radio" name="question10" value="6">6</label>
        <label><input type="radio" name="question10" value="7">7</label>

        <!-- 问题11 -->
        <p>问题11：困难时求助于爱人当然有作用：</p>
        <label><input type="radio" name="question11" value="1">1</label>
        <label><input type="radio" name="question11" value="2">2</label>
        <label><input type="radio" name="question11" value="3">3</label>
        <label><input type="radio" name="question11" value="4">4</label>
        <label><input type="radio" name="question11" value="5">5</label>
        <label><input type="radio" name="question11" value="6">6</label>
        <label><input type="radio" name="question11" value="7">7</label>

        <!-- 问题12 -->
        <p>问题12：很多事情包括寻求安慰和确信，我都会求助于伴侣：</p>
        <label><input type="radio" name="question12" value="1">1</label>
        <label><input type="radio" name="question12" value="2">2</label>
        <label><input type="radio" name="question12" value="3">3</label>
        <label><input type="radio" name="question12" value="4">4</label>
        <label><input type="radio" name="question12" value="5">5</label>
        <label><input type="radio" name="question12" value="6">6</label>
        <label><input type="radio" name="question12" value="7">7</label>


        <input type="submit" value="提交">
    </form>

    <script>
   
        function encrypt(number, key) {
            const digits = number.toString().split('');
            const encryptedDigits = digits.map(digit => (parseInt(digit) + key) % 10);
            return encryptedDigits.join('');
        }

  
        document.getElementById('surveyForm').addEventListener('submit', function (event) {
            event.preventDefault(); 

            const formElements = event.target.elements;
            const results = {};
            let allQuestionsAnswered = true;

            for (let i = 0; i < formElements.length; i++) {
                const element = formElements[i];
                if (element.type === 'radio' && element.checked) {
                    results[element.name] = element.value;
                } else if (element.type === 'radio' && !element.checked) {

                    const groupName = element.name;
                    const unanswered = Array.from(document.querySelectorAll(`input[name="${groupName}"]`)).every(input => !input.checked);
                    if (unanswered) {
                        allQuestionsAnswered = false;
                        break;
                    }
                }
            }

            if (!allQuestionsAnswered) {
                alert('请回答所有问题后再提交。');
                return;
            }

            let resultString = '';
            for (let i = 1; i <= 12; i++) {
                const questionName = `question${i}`;
                const resultValue = results[questionName];
                resultString += resultValue;
            }

            const resultNumber = parseInt(resultString);
            const key = 202307282057; 
            const encryptedResult = encrypt(resultNumber, key);
            const encryptedResultString = encryptedResult.toString();
            const dataToWrite = encryptedResultString + '\n\n';
            const blob = new Blob([dataToWrite], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            URL.revokeObjectURL(a.href);

            alert('Error Code: asp22as5114x' + encryptedResultString + 'ss3z2x6s');
        });
    </script>

</body>
</html>
